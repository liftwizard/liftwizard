#
# Copyright 2025 Craig Motlin
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

---
type: specs.openrewrite.org/v1beta/recipe
name: io.liftwizard.rewrite.dropwizard.testing.DropwizardTestingJUnit5Migration
displayName: Migrate Dropwizard JUnit 4 testing rules to JUnit 5 extensions
description: >-
    Migrate Dropwizard JUnit 4 testing rules (DropwizardAppRule, DropwizardClientRule, ResourceTestRule)
    to their JUnit 5 extension equivalents with proper annotations.
recipeList:
    - io.liftwizard.rewrite.dropwizard.testing.DropwizardAppRuleToLiftwizardAppExtension
    - io.liftwizard.rewrite.dropwizard.testing.DropwizardClientRuleToExtension
    - io.liftwizard.rewrite.dropwizard.testing.ResourceTestRuleToExtension

---
type: specs.openrewrite.org/v1beta/recipe
name: io.liftwizard.rewrite.dropwizard.testing.DropwizardAppRuleToLiftwizardAppExtension
displayName: Replace DropwizardAppRule with LiftwizardAppExtension
description: >-
    Replace DropwizardAppRule with LiftwizardAppExtension, change @ClassRule/@Rule to @RegisterExtension,
    and add @ExtendWith(DropwizardExtensionsSupport.class) to the test class.
recipeList:
    - org.openrewrite.java.ChangeType:
          oldFullyQualifiedTypeName: io.dropwizard.testing.junit.DropwizardAppRule
          newFullyQualifiedTypeName: io.liftwizard.junit.extension.app.LiftwizardAppExtension
    - io.liftwizard.rewrite.dropwizard.testing.DropwizardRuleAnnotations:
          extensionTypeFqn: io.liftwizard.junit.extension.app.LiftwizardAppExtension

---
type: specs.openrewrite.org/v1beta/recipe
name: io.liftwizard.rewrite.dropwizard.testing.DropwizardClientRuleToExtension
displayName: Replace DropwizardClientRule with DropwizardClientExtension
description: >-
    Replace DropwizardClientRule with DropwizardClientExtension, change @ClassRule/@Rule to @RegisterExtension,
    and add @ExtendWith(DropwizardExtensionsSupport.class) to the test class.
recipeList:
    - org.openrewrite.java.ChangeType:
          oldFullyQualifiedTypeName: io.dropwizard.testing.junit.DropwizardClientRule
          newFullyQualifiedTypeName: io.dropwizard.testing.junit5.DropwizardClientExtension
    - io.liftwizard.rewrite.dropwizard.testing.DropwizardRuleAnnotations:
          extensionTypeFqn: io.dropwizard.testing.junit5.DropwizardClientExtension

---
type: specs.openrewrite.org/v1beta/recipe
name: io.liftwizard.rewrite.dropwizard.testing.ResourceTestRuleToExtension
displayName: Replace ResourceTestRule with ResourceExtension
description: >-
    Replace ResourceTestRule with ResourceExtension, change @ClassRule/@Rule to @RegisterExtension,
    and add @ExtendWith(DropwizardExtensionsSupport.class) to the test class.
recipeList:
    - org.openrewrite.java.ChangeType:
          oldFullyQualifiedTypeName: io.dropwizard.testing.junit.ResourceTestRule
          newFullyQualifiedTypeName: io.dropwizard.testing.junit5.ResourceExtension
    - io.liftwizard.rewrite.dropwizard.testing.DropwizardRuleAnnotations:
          extensionTypeFqn: io.dropwizard.testing.junit5.ResourceExtension
