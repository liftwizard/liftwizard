<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" /> 
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"> 
<title>Liftwizard: Matching Json</title>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JBFKWT91J2"></script>
<script>
	window.dataLayer = window.dataLayer || [];
	function gtag() {
		dataLayer.push(arguments);
	}
	gtag("js", new Date());

	gtag("config", "G-JBFKWT91J2");
</script>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-JBFKWT91J2"></script>
<script>
	window.dataLayer = window.dataLayer || [];
	function gtag() {
		dataLayer.push(arguments);
	}
	gtag("js", new Date());

	gtag("config", "G-JBFKWT91J2");
</script>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-JBFKWT91J2"></script>
<script>
	window.dataLayer = window.dataLayer || [];
	function gtag() {
		dataLayer.push(arguments);
	}
	gtag("js", new Date());

	gtag("config", "G-JBFKWT91J2");
</script>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-JBFKWT91J2"></script>
<script>
	window.dataLayer = window.dataLayer || [];
	function gtag() {
		dataLayer.push(arguments);
	}
	gtag("js", new Date());

	gtag("config", "G-JBFKWT91J2");
</script>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-JBFKWT91J2"></script>
<script>
	window.dataLayer = window.dataLayer || [];
	function gtag() {
		dataLayer.push(arguments);
	}
	gtag("js", new Date());

	gtag("config", "G-JBFKWT91J2");
</script>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-JBFKWT91J2"></script>
<script>
	window.dataLayer = window.dataLayer || [];
	function gtag() {
		dataLayer.push(arguments);
	}
	gtag("js", new Date());

	gtag("config", "G-JBFKWT91J2");
</script>
<link rel="stylesheet" type="text/css" href="/docs/static/css/katex.min.css">
<link rel="stylesheet" type="text/css" href="/docs/static/main.css">
<link rel="stylesheet" type="text/css" href="/docs/static/css/global-overrides.css">
<link rel="stylesheet" type="text/css" href="/docs/static/css/global-overrides.css">
<link rel="stylesheet" type="text/css" href="/docs/static/css/global-overrides.css">
</head>
<link rel="shortcut icon" href="/docs/favicon.png"type="image/ico"/>
<body class="znai-theme theme-znai-dark">
<script>(function() {
    var themeNameKey = 'znaiTheme';
    var darkThemeName = 'znai-dark';
    var lightThemeName = 'default';

    var znaiTheme = {
        changeHandlers: [],
        addChangeHandler(handler) {
            this.changeHandlers.push(handler);
        },
        removeChangeHandler(handler) {
            var idx = this.changeHandlers.indexOf(handler);
            this.changeHandlers.splice(idx, 1);
        },
        set(name) {
            this.name = name;
            document.body.className = 'znai-theme theme-' + name;

            var idx = 0;
            var len = this.changeHandlers.length;
            for (; idx < len; idx++) {
                this.changeHandlers[idx](name);
            }
        },
        setExplicitly(name) {
            storeThemeName(name);
            this.set(name);
        },
        setExplicitlyIfNotSetAlready(name) {
            const themeName = getStoredThemeName();
            if (themeName) {
                return
            }

            this.setExplicitly(name)
        },
        toggle() {
            this.setExplicitly(this.name === lightThemeName ? darkThemeName : lightThemeName)
        }
    };

    var mediaThemeName = setLightMatchMediaListenerAndGetThemeName()
    var themeName = getStoredThemeName() || mediaThemeName;
    znaiTheme.set(themeName);

    window.znaiTheme = znaiTheme;

    function getStoredThemeName() {
        return localStorage.getItem(themeNameKey);
    }

    function storeThemeName(name) {
        return localStorage.setItem(themeNameKey, name);
    }

    function setLightMatchMediaListenerAndGetThemeName() {
        if (!window.matchMedia) {
            return darkThemeName;
        }

        var lightQuery = window.matchMedia('(prefers-color-scheme: light)');
        lightQuery.addListener(function (e) {
            const newThemeName = e.matches ? lightThemeName : darkThemeName;
            znaiTheme.setExplicitly(newThemeName);
        });

        return lightQuery.matches ? lightThemeName : darkThemeName;
    }
})()</script>
<div id="znai"><div id="znai-initial-page-loading" style="margin: -20px 0 0 -20px; padding: 0 40px 40px 0; width: 100vw; height: 100vh; display: flex; justify-content: center; align-items: center">
    <div></div>
</div><section id="page-content" style="max-width: 640px; margin-left: auto; margin-right: auto;">
<article>
<p>Liftwizard includes utilities for asserting that a JSON string equals the contents of a file using JSON equality semantics Liftwizard delegates to JSONassert for JSON comparison The API is similar to the file matching API and re record mode is enabled with the same environment variable The setup is different for the JUnit 4 Rule and JUnit 5 Extension After setup both have the same API If the file does not exist or the contents do not match an assertion error is added to an ErrorCollector If the ErrorCollector contains any errors the test fails at the end with all expected actual pairs reported together If is set to will not emit any JUnit 4 works well with Dropwizard s JsonMatchRule DropwizardAppRule public class ExampleTest @Rule private final DropwizardAppRule&lt;HelloWorldConfiguration&gt; dropwizardAppRule new DropwizardAppRule&lt;&gt; ExampleApplication class ResourceHelpers resourceFilePath config test json5 @Rule public final JsonMatchRule jsonMatchRule new JsonMatchRule this getClass @Test public void smokeTest Response actualResponse this dropwizardAppRule client target http localhost port api example resolveTemplate port this dropwizardAppRule getLocalPort request get String actualJsonResponse actualResponse readEntity String class String expectedResponseClassPathLocation this getClass getSimpleName testName json this jsonMatchRule assertFileContents expectedResponseClassPathLocation actualJsonResponse JUnit 5 works well with Dropwizard s or Liftwizard s JsonMatchExtension DropwizardAppExtension LiftwizardAppExtension public class ExampleTest @RegisterExtension private final LiftwizardAppExtension&lt; &gt; appExtension this getLiftwizardAppExtension @RegisterExtension private final JsonMatchExtension jsonMatchExtension new JsonMatchExtension this getClass @Nonnull @Override private LiftwizardAppExtension&lt; &gt; getLiftwizardAppExtension return new LiftwizardAppExtension&lt;&gt; ExampleApplication class ResourceHelpers resourceFilePath config test json5 @Test public void smokeTest Response actualResponse this appExtension client target http localhost port api example resolveTemplate port this appExtension getLocalPort request get String actualJsonResponse actualResponse readEntity String class String expectedResponseClassPathLocation this getClass getSimpleName testName json this jsonMatchExtension assertFileContents expectedResponseClassPathLocation actualJsonResponse LIFTWIZARD_FILE_MATCH_RULE_RERECORD this jsonMatchExtension assertFileContents expectedJsonClassPathLocation actualJson LIFTWIZARD_FILE_MATCH_RULE_RERECORD true assertJsonContents AssertionErrors</p>
</article>
</section>
<section id="table-of-contents" style="max-width: 640px; margin-left: auto; margin-right: auto;">
<article>
<a href="/docs/introduction/liftwizard/">Liftwizard</a>
</article>

<article>
<a href="/docs/configuration/environment-variable-substitution/">Environment Variable Substitution</a>
</article>

<article>
<a href="/docs/configuration/json5-configuration/">Json5 Configuration</a>
</article>

<article>
<a href="/docs/configuration/ConfigLoggingBundle/">ConfigLoggingBundle</a>
</article>

<article>
<a href="/docs/jackson/ObjectMapperBundle/">ObjectMapperBundle</a>
</article>

<article>
<a href="/docs/logging/JerseyHttpLoggingBundle/">JerseyHttpLoggingBundle</a>
</article>

<article>
<a href="/docs/logging/buffered-logging/">Buffered Logging</a>
</article>

<article>
<a href="/docs/logging/filter-factories/">Filter Factories</a>
</article>

<article>
<a href="/docs/logging/Slf4jUncaughtExceptionHandlerBundle/">Slf4jUncaughtExceptionHandlerBundle</a>
</article>

<article>
<a href="/docs/graphql/bundle/">Bundle</a>
</article>

<article>
<a href="/docs/graphql/instrumentation-logging/">Instrumentation Logging</a>
</article>

<article>
<a href="/docs/graphql/instrumentation-metrics/">Instrumentation Metrics</a>
</article>

<article>
<a href="/docs/graphql/data-fetcher-async/">Data Fetcher Async</a>
</article>

<article>
<a href="/docs/reladomo/reladomo-overview/">Reladomo Overview</a>
</article>

<article>
<a href="/docs/reladomo/reladomo-operation-compiler/">Reladomo Operation Compiler</a>
</article>

<article>
<a href="/docs/database/named-data-source/">Named Data Source</a>
</article>

<article>
<a href="/docs/database/liquibase-migrations/">Liquibase Migrations</a>
</article>

<article>
<a href="/docs/auth/dynamic-authentication-and-impersonation/">Dynamic Authentication And Impersonation</a>
</article>

<article>
<a href="/docs/testing/testing/">Testing</a>
</article>

<article>
<a href="/docs/testing/matching-files/">Matching Files</a>
</article>

<article>
<a href="/docs/testing/matching-json/">Matching Json</a>
</article>

<article>
<a href="/docs/maven/maven-best-practices/">Maven Best Practices</a>
</article>

<article>
<a href="/docs/maven/minimal-parent/">Minimal Parent</a>
</article>

<article>
<a href="/docs/maven/profile-parent/">Profile Parent</a>
</article>

<article>
<a href="/docs/maven/bill-of-materials/">Bill Of Materials</a>
</article>

<article>
<a href="/docs/temporal-data/temporal-data-overview/">Temporal Data Overview</a>
</article>

<article>
<a href="/docs/temporal-data/running-example/">Running Example</a>
</article>

<article>
<a href="/docs/temporal-data/non-destructive-updates/">Non Destructive Updates</a>
</article>

<article>
<a href="/docs/temporal-data/as-of-queries/">As Of Queries</a>
</article>

<article>
<a href="/docs/temporal-data/versioning/">Versioning</a>
</article>

<article>
<a href="/docs/temporal-data/auditing/">Auditing</a>
</article>

<article>
<a href="/docs/temporal-data/optimistic-locking/">Optimistic Locking</a>
</article>

<article>
<a href="/docs/temporal-data/diffs/">Diffs</a>
</article>

<article>
<a href="/docs/temporal-data/maker-checker-workflows/">Maker Checker Workflows</a>
</article>
</section>
</div>
<script type="text/javascript" src="/docs/footer.js"></script>
<script type="text/javascript" src="/docs/toc.js"></script>
<script type="text/javascript" src="/docs/assets.js"></script>
<script type="module" src="/docs/static/__vite-browser-external-8Pss11n5.js"></script>
<script type="module" src="/docs/static/architecture-U656AL7Q-DjPBJmSV.js"></script>
<script type="module" src="/docs/static/architectureDiagram-VXUJARFQ-ChBn1xk8.js"></script>
<script type="module" src="/docs/static/blockDiagram-VD42YOAC-Budi6d17.js"></script>
<script type="module" src="/docs/static/c4Diagram-YG6GDRKO-Blf-Q85b.js"></script>
<script type="module" src="/docs/static/classDiagram-2ON5EDUG-CV-r9Le6.js"></script>
<script type="module" src="/docs/static/classDiagram-v2-WZHVMYZB-FjmVyVcW.js"></script>
<script type="module" src="/docs/static/cose-bilkent-S5V4N54A-CwokiWn5.js"></script>
<script type="module" src="/docs/static/dagre-6UL2VRFP-qGDT-4E-.js"></script>
<script type="module" src="/docs/static/diagram-PSM6KHXK-asygiqY4.js"></script>
<script type="module" src="/docs/static/diagram-QEK2KX5R-RckI0Vxl.js"></script>
<script type="module" src="/docs/static/diagram-S2PKOQOG-D3NvEb3Q.js"></script>
<script type="module" src="/docs/static/erDiagram-Q2GNP2WA-Cyp4lw77.js"></script>
<script type="module" src="/docs/static/flowDiagram-NV44I4VS-Durqfvdj.js"></script>
<script type="module" src="/docs/static/ganttDiagram-JELNMOA3-COOaPycs.js"></script>
<script type="module" src="/docs/static/gitGraph-F6HP7TQM-CqS9sC5f.js"></script>
<script type="module" src="/docs/static/gitGraphDiagram-NY62KEGX-BQN4gPQ9.js"></script>
<script type="module" src="/docs/static/index-CvuEZtbh.js"></script>
<script type="module" src="/docs/static/info-NVLQJR56-BUcKGpxN.js"></script>
<script type="module" src="/docs/static/infoDiagram-WHAUD3N6-D7Xs3PNk.js"></script>
<script type="module" src="/docs/static/journeyDiagram-XKPGCS4Q-C0gcrYJQ.js"></script>
<script type="module" src="/docs/static/kanban-definition-3W4ZIXB7-DA5VTkMF.js"></script>
<script type="module" src="/docs/static/katex-DDX8Hq9d.js"></script>
<script type="module" src="/docs/static/mermaid-DyDSBgik.js"></script>
<script type="module" src="/docs/static/mindmap-definition-VGOIOE7T-CeGF8Nug.js"></script>
<script type="module" src="/docs/static/packet-BFZMPI3H-BiSDgaWb.js"></script>
<script type="module" src="/docs/static/pie-7BOR55EZ-6DVHbXh5.js"></script>
<script type="module" src="/docs/static/pieDiagram-ADFJNKIX-D8LeIfHz.js"></script>
<script type="module" src="/docs/static/quadrantDiagram-AYHSOK5B-CT_QATm0.js"></script>
<script type="module" src="/docs/static/radar-NHE76QYJ-DmqrXv6L.js"></script>
<script type="module" src="/docs/static/requirementDiagram-UZGBJVZJ-BbaHa2fs.js"></script>
<script type="module" src="/docs/static/rolldown-runtime-BfSZLbwf.js"></script>
<script type="module" src="/docs/static/sankeyDiagram-TZEHDZUN-D9YTmh-I.js"></script>
<script type="module" src="/docs/static/sequenceDiagram-WL72ISMW-D9tLLYI1.js"></script>
<script type="module" src="/docs/static/stateDiagram-FKZM4ZOC-C__hSZA6.js"></script>
<script type="module" src="/docs/static/stateDiagram-v2-4FDKWEC3-i8H-EINL.js"></script>
<script type="module" src="/docs/static/timeline-definition-IT6M3QCI-xF8WKVt0.js"></script>
<script type="module" src="/docs/static/treemap-KMMF4GRG-DIUMOj6d.js"></script>
<script type="module" src="/docs/static/xychartDiagram-PRI3JC2R-BDCeeoNZ.js"></script>
<script type="module" src="/docs/search-index.js"></script>
<script type="module">
document.getElementById('znai').innerHTML = '';
/*<!--*/
/*
 * Copyright 2025 znai maintainers
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function initializeSearchIndex() {
    if (window.znaiSearchData) {
        window.znaiSearchIdx = window.createLocalSearchIndex();
        window.populateLocalSearchIndexWithData(window.znaiSearchIdx, window.znaiSearchData);
    }
}

// Call the method to initialize the search index.
initializeSearchIndex();

window.ReactDOM.render(React.createElement(Documentation, {
  "docMeta" : {
    "viewOn" : {
      "link" : "https://github.com/liftwizard/liftwizard/blob/main/docs/src/main/znai",
      "title" : "View On GitHub"
    },
    "id" : "docs",
    "title" : "Liftwizard",
    "type" : "Guide",
    "previewEnabled" : false
  },
  "page" : {
    "type" : "Page",
    "content" : [ {
      "type" : "Paragraph",
      "content" : [ {
        "text" : "Liftwizard includes utilities for asserting that a JSON string equals the contents of a file, using JSON equality semantics. Liftwizard delegates to ",
        "type" : "SimpleText"
      }, {
        "url" : "https://github.com/skyscreamer/JSONassert",
        "isFile" : false,
        "type" : "Link",
        "content" : [ {
          "text" : "JSONassert",
          "type" : "SimpleText"
        } ]
      }, {
        "text" : " for JSON comparison.",
        "type" : "SimpleText"
      } ]
    }, {
      "type" : "Paragraph",
      "content" : [ {
        "text" : "The API is similar to the ",
        "type" : "SimpleText"
      }, {
        "url" : "/docs/testing/matching-files",
        "isFile" : false,
        "type" : "Link",
        "content" : [ {
          "text" : "file matching API",
          "type" : "SimpleText"
        } ]
      }, {
        "text" : ", and re-record mode is enabled with the same environment variable ",
        "type" : "SimpleText"
      }, {
        "code" : "LIFTWIZARD_FILE_MATCH_RULE_RERECORD",
        "type" : "InlinedCode"
      }, {
        "text" : ".",
        "type" : "SimpleText"
      } ]
    }, {
      "type" : "Paragraph",
      "content" : [ {
        "text" : "The setup is different for the JUnit 4 Rule and JUnit 5 Extension. After setup, both have the same API.",
        "type" : "SimpleText"
      } ]
    }, {
      "lang" : "java",
      "snippet" : "this.jsonMatchExtension.assertFileContents(expectedJsonClassPathLocation, actualJson);",
      "lineNumber" : "",
      "type" : "Snippet"
    }, {
      "type" : "Paragraph",
      "content" : [ {
        "text" : "If the file does not exist, or the contents do not match, an assertion error is added to an ",
        "type" : "SimpleText"
      }, {
        "url" : "https://junit.org/junit4/javadoc/4.12/org/junit/rules/ErrorCollector.html",
        "isFile" : false,
        "type" : "Link",
        "content" : [ {
          "text" : "ErrorCollector",
          "type" : "SimpleText"
        } ]
      }, {
        "text" : ". If the ErrorCollector contains any errors, the test fails at the end with all expected/actual pairs reported together.",
        "type" : "SimpleText"
      } ]
    }, {
      "type" : "Paragraph",
      "content" : [ {
        "text" : "If ",
        "type" : "SimpleText"
      }, {
        "code" : "LIFTWIZARD_FILE_MATCH_RULE_RERECORD",
        "type" : "InlinedCode"
      }, {
        "text" : " is set to ",
        "type" : "SimpleText"
      }, {
        "code" : "true",
        "type" : "InlinedCode"
      }, {
        "text" : ", ",
        "type" : "SimpleText"
      }, {
        "code" : "assertJsonContents",
        "type" : "InlinedCode"
      }, {
        "text" : " will not emit any ",
        "type" : "SimpleText"
      }, {
        "code" : "AssertionErrors",
        "type" : "InlinedCode"
      }, {
        "text" : ".",
        "type" : "SimpleText"
      } ]
    }, {
      "default" : "JUnit 5",
      "tabsContent" : [ {
        "name" : "JUnit 4",
        "content" : [ {
          "type" : "Paragraph",
          "content" : [ {
            "code" : "JsonMatchRule",
            "type" : "InlinedCode"
          }, {
            "text" : " works well with Dropwizard's ",
            "type" : "SimpleText"
          }, {
            "url" : "https://www.dropwizard.io/en/release-2.1.x/manual/testing.html#junit-4",
            "isFile" : false,
            "type" : "Link",
            "content" : [ {
              "code" : "DropwizardAppRule",
              "type" : "InlinedCode"
            } ]
          }, {
            "text" : ".",
            "type" : "SimpleText"
          } ]
        }, {
          "lang" : "java",
          "snippet" : "public class ExampleTest\n{\n    @Rule\n    private final DropwizardAppRule<HelloWorldConfiguration> dropwizardAppRule = new DropwizardAppRule<>(\n            ExampleApplication.class,\n            ResourceHelpers.resourceFilePath(\"config-test.json5\"));\n\n    @Rule\n    public final JsonMatchRule jsonMatchRule = new JsonMatchRule(this.getClass());\n\n    @Test\n    public void smokeTest()\n    {\n        Response actualResponse = this.dropwizardAppRule\n                .client()\n                .target(\"http://localhost:{port}/api/example\")\n                .resolveTemplate(\"port\", this.dropwizardAppRule.getLocalPort())\n                .request()\n                .get();\n\n        String actualJsonResponse = actualResponse.readEntity(String.class);\n        String expectedResponseClassPathLocation = this.getClass().getSimpleName() + \".\" + testName + \".json\";\n        this.jsonMatchRule.assertFileContents(expectedResponseClassPathLocation, actualJsonResponse);\n    }\n}",
          "lineNumber" : "",
          "type" : "Snippet"
        } ]
      }, {
        "name" : "JUnit 5",
        "content" : [ {
          "type" : "Paragraph",
          "content" : [ {
            "code" : "JsonMatchExtension",
            "type" : "InlinedCode"
          }, {
            "text" : " works well with Dropwizard's ",
            "type" : "SimpleText"
          }, {
            "url" : "https://www.dropwizard.io/en/stable/manual/testing.html#junit-5",
            "isFile" : false,
            "type" : "Link",
            "content" : [ {
              "code" : "DropwizardAppExtension",
              "type" : "InlinedCode"
            } ]
          }, {
            "text" : " or Liftwizard's ",
            "type" : "SimpleText"
          }, {
            "code" : "LiftwizardAppExtension",
            "type" : "InlinedCode"
          }, {
            "text" : ".",
            "type" : "SimpleText"
          } ]
        }, {
          "lang" : "java",
          "snippet" : "public class ExampleTest\n{\n    @RegisterExtension\n    private final LiftwizardAppExtension<?> appExtension = this.getLiftwizardAppExtension();\n\n    @RegisterExtension\n    private final JsonMatchExtension jsonMatchExtension = new JsonMatchExtension(this.getClass());\n\n    @Nonnull\n    @Override\n    private LiftwizardAppExtension<?> getLiftwizardAppExtension()\n    {\n        return new LiftwizardAppExtension<>(\n                ExampleApplication.class,\n                ResourceHelpers.resourceFilePath(\"config-test.json5\"));\n    }\n\n    @Test\n    public void smokeTest()\n    {\n        Response actualResponse = this.appExtension\n                .client()\n                .target(\"http://localhost:{port}/api/example\")\n                .resolveTemplate(\"port\", this.appExtension.getLocalPort())\n                .request()\n                .get();\n\n        String actualJsonResponse = actualResponse.readEntity(String.class);\n        String expectedResponseClassPathLocation = this.getClass().getSimpleName() + \".\" + testName + \".json\";\n        this.jsonMatchExtension.assertFileContents(expectedResponseClassPathLocation, actualJsonResponse);\n    }\n}",
          "lineNumber" : "",
          "type" : "Snippet"
        } ]
      } ],
      "defaultTabIdx" : 1,
      "type" : "Tabs"
    } ],
    "lastModifiedTime" : 1771537682077,
    "tocItem" : {
      "chapterTitle" : "Testing",
      "pageTitle" : "Matching Json",
      "pageMeta" : { },
      "dirName" : "testing",
      "fileName" : "matching-json",
      "fileExtension" : "md",
      "viewOnRelativePath" : null,
      "pageSectionIdTitles" : [ ]
    }
  }
}), document.getElementById("znai"));
/*-->*/

</script>

</body>
</html>
